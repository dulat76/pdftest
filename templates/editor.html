<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†–µ–¥–∞–∫—Ç–æ—Ä –∫–≤–∏–∑–æ–≤</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/interact.js/1.10.11/interact.min.js"></script>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>üìù –†–µ–¥–∞–∫—Ç–æ—Ä –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞–Ω–∏–π</h1>
            <p>–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –∫–≤–∏–∑—ã –∏–∑ PDF –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–æ–π</p>
        </header>

        <!-- –ë–ª–æ–∫ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ -->
        <div class="editor-nav">
            {% if role == 'superuser' %}
            <a href="{{ url_for('admin_teachers_page') }}" class="nav-btn">
                üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∏—Ç–µ–ª—è–º–∏
            </a>
            <a href="{{ url_for('admin_subjects_page') }}" class="nav-btn">
                üìö –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞–º–∏
            </a>
            {% endif %}
            <a href="{{ url_for('ai_settings_page') }}" class="nav-btn">
                ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ AI
            </a>
            <a href="{{ url_for('logout') }}" class="nav-btn">
                üö™ –í—ã—Ö–æ–¥
            </a>
        </div>



        <div class="main-content">
            <!-- –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
            <div class="sidebar">
                <!-- –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ -->
                <section>
                    <h3>üìÅ –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞</h3>
                    <input type="file" id="fileInput" accept=".pdf,.png,.jpg,.jpeg" class="input">
                    <p style="font-size: 12px; color: #666; margin-top: 5px;">
                        –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã: PDF, PNG, JPG
                    </p>
                </section>

                <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—è–º–∏ -->
                <section>
                    <h3>üîß –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—è–º–∏</h3>
                    
                    <button id="addFieldBtn" class="btn"  disabled>
                        ‚ûï –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ
                    </button>
                    <p style="margin: 10px 0; font-size: 14px;">
                        –í—Å–µ–≥–æ –ø–æ–ª–µ–π: <span id="fieldCount">0</span>
                    </p>
                </section>

                <!-- –°–≤–æ–π—Å—Ç–≤–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—è -->
                <section>
                    <div id="fieldProperties">
                        <p style="color: #666; font-style: italic;">–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–ª–µ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</p>
                    </div>
                </section>

                <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —à–∞–±–ª–æ–Ω–∞ -->
                <section>
                    <h3>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —à–∞–±–ª–æ–Ω–∞</h3>
                    
                    <div class="form-group">
                        <label for="templateName">–ù–∞–∑–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞:</label>
                        <input type="text" id="templateName" class="input" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ...">
                    </div>

                    <div class="form-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <div class="form-group">
                            <label for="classNumber">–ö–ª–∞—Å—Å *:</label>
                            <select id="classNumber" class="input" required onchange="updateTestUrlPreview()">
                                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–ª–∞—Å—Å...</option>
                                <option value="1">1 –∫–ª–∞—Å—Å</option>
                                <option value="2">2 –∫–ª–∞—Å—Å</option>
                                <option value="3">3 –∫–ª–∞—Å—Å</option>
                                <option value="4">4 –∫–ª–∞—Å—Å</option>
                                <option value="5">5 –∫–ª–∞—Å—Å</option>
                                <option value="6">6 –∫–ª–∞—Å—Å</option>
                                <option value="7">7 –∫–ª–∞—Å—Å</option>
                                <option value="8">8 –∫–ª–∞—Å—Å</option>
                                <option value="9">9 –∫–ª–∞—Å—Å</option>
                                <option value="10">10 –∫–ª–∞—Å—Å</option>
                                <option value="11">11 –∫–ª–∞—Å—Å</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="subjectSelect">–ü—Ä–µ–¥–º–µ—Ç *:</label>
                            <select id="subjectSelect" class="input" required onchange="updateTestUrlPreview()">
                                <option value="">–ó–∞–≥—Ä—É–∑–∫–∞...</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="topic">–¢–µ–º–∞ —Ç–µ—Å—Ç–∞ *:</label>
                        <input type="text" id="topic" class="input" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –î—Ä–æ–±–∏ –∏ –ø—Ä–æ—Ü–µ–Ω—Ç—ã" required oninput="updateTestUrlPreview()">
                        <small style="color: #666; font-size: 12px;">–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–∏</small>
                    </div>

                    <div class="form-group" id="testUrlPreview" style="display: none; background: #e9ecef; padding: 10px; border-radius: 6px; margin-top: 10px;">
                        <label style="font-size: 12px; color: #666;">–°—Å—ã–ª–∫–∞ –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤:</label>
                        <div style="font-family: monospace; font-size: 12px; word-break: break-all; margin-top: 5px;" id="testUrlText"></div>
                        <button type="button" onclick="copyTestUrl()" style="margin-top: 5px; padding: 5px 10px; background: #667eea; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 12px;">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                    </div>

                    <div class="form-group">
                        <label for="sheetUrl">–°—Å—ã–ª–∫–∞ –Ω–∞ Google –¢–∞–±–ª–∏—Ü—É:</label>
                        <input type="url" id="sheetUrl" class="input" placeholder="https://docs.google.com/spreadsheets/...">
                    </div>

                    <div class="form-group">
                        <label for="availableClasses">–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–ª–∞—Å—Å—ã (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é):</label>
                        <input type="text" id="availableClasses" class="input" placeholder="5–ê, 5–ë, 6–ê...">
                    </div>
                </section>

                <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞–º–∏ -->
                <section>
                    <h3>üíæ –®–∞–±–ª–æ–Ω—ã</h3>
                    
                    <div class="form-group">
                        <label for="templateSelect">–ó–∞–≥—Ä—É–∑–∏—Ç—å —à–∞–±–ª–æ–Ω:</label>
                        <select id="templateSelect" class="select">
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —à–∞–±–ª–æ–Ω...</option>
                        </select>
                    </div>
                    
                    <button onclick="loadSelectedTemplate()" class="btn" style="width: 100%; margin-bottom: 10px;">
                        üìÇ –ó–∞–≥—Ä—É–∑–∏—Ç—å
                    </button>
                    
                    <button id="saveBtn" class="btn btn-large" onclick="saveTemplate()" disabled style="width: 100%;">
                        üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —à–∞–±–ª–æ–Ω
                    </button>
                </section>
            </div>

            <!-- –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å —Å –¥–æ–∫—É–º–µ–Ω—Ç–æ–º -->
            <div class="editor-area">
                <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º -->
                <div id="pageNavigation" style="display: none; margin-bottom: 20px; text-align: center;">
                    <button id="prevBtn" class="btn" onclick="prevPage()">‚¨ÖÔ∏è –ü—Ä–µ–¥—ã–¥—É—â–∞—è</button>
                    <span id="pageInfo" style="margin: 0 20px; font-weight: bold;">1 / 1</span>
                    <button id="nextBtn" class="btn" onclick="nextPage()">–°–ª–µ–¥—É—é—â–∞—è ‚û°Ô∏è</button>
                </div>

                <!-- –û–±–ª–∞—Å—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ -->
                <div id="documentViewer">
                    <div class="placeholder" style="text-align: center; padding: 50px; color: #666;">
                        <h3>üìÑ –ó–∞–≥—Ä—É–∑–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç –¥–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã</h3>
                        <p>–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã: PDF, PNG, JPG, JPEG</p>
                        <p>–ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –≤—ã —Å–º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–ª—è—Ç—å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—è –¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <p id="modalText">–°–æ–æ–±—â–µ–Ω–∏–µ</p>
        </div>
    </div>

    <script src="/static/js/editor.js"></script>
</body>
</html>
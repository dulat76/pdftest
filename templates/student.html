<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <style>
        /* –ò–Ω–ª–∞–π–Ω —Å—Ç–∏–ª–∏ –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã—Ö –º–æ–±–∏–ª—å–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ */
        .mobile-only { display: none; }
        @media (max-width: 768px) {
            .desktop-only { display: none; }
            .mobile-only { display: block; }
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ —à–∞–≥–æ–≤ */
        .step-indicator {
            padding: 8px 15px;
            border-radius: 20px;
            background: #f0f0f0;
            color: #999;
            font-size: 0.9em;
            transition: all 0.3s;
        }
        
        .step-indicator.active {
            background: #27ae60;
            color: white;
            font-weight: bold;
        }
        
        #filterProgress {
            margin: 20px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        @media (max-width: 768px) {
            #filterProgress {
                font-size: 0.8em;
            }
            .step-indicator {
                padding: 6px 10px;
                font-size: 0.8em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è</h1>
            <div class="mobile-only" style="font-size: 0.9rem; opacity: 0.8;">
                üì± –ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è
            </div>
        </header>

        <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ -->
        <div id="filterProgress" style="margin: 20px 0; text-align: center; display: none;">
            <div style="display: flex; justify-content: center; gap: 10px; margin-bottom: 10px;">
                <span id="step1" class="step-indicator active">1. –ö–ª–∞—Å—Å</span>
                <span>‚Üí</span>
                <span id="step2" class="step-indicator">2. –ü—Ä–µ–¥–º–µ—Ç</span>
                <span>‚Üí</span>
                <span id="step3" class="step-indicator">3. –¢–µ–º–∞</span>
                <span>‚Üí</span>
                <span id="step4" class="step-indicator">4. –¢–µ—Å—Ç</span>
            </div>
        </div>

        <!-- –≠—Ç–∞–ø 1: –í—ã–±–æ—Ä –∫–ª–∞—Å—Å–∞ -->
        <div class="student-form" id="stepClassForm">
            <h2>–®–∞–≥ 1: –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –∫–ª–∞—Å—Å</h2>
            <div class="form-group">
                <label for="classSelect">–í–∞—à –∫–ª–∞—Å—Å:</label>
                <select id="classSelect" required class="select" style="font-size: 1.1em; padding: 12px; width: 100%; max-width: 400px;">
                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–ª–∞—Å—Å...</option>
                </select>
            </div>
            <button onclick="goBack()" id="backBtn" class="btn" style="display: none; margin-top: 20px;">‚Üê –ù–∞–∑–∞–¥</button>
        </div>

        <!-- –≠—Ç–∞–ø 2: –í—ã–±–æ—Ä –ø—Ä–µ–¥–º–µ—Ç–∞ -->
        <div class="student-form" id="stepSubjectForm" style="display: none;">
            <h2>–®–∞–≥ 2: –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–µ–¥–º–µ—Ç</h2>
            <div class="form-group">
                <label for="subjectSelect">–ü—Ä–µ–¥–º–µ—Ç:</label>
                <select id="subjectSelect" required class="select" style="font-size: 1.1em; padding: 12px; width: 100%; max-width: 400px;">
                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–µ–¥–º–µ—Ç...</option>
                </select>
            </div>
            <button onclick="goBack()" class="btn" style="margin-top: 20px;">‚Üê –ù–∞–∑–∞–¥</button>
        </div>

        <!-- –≠—Ç–∞–ø 3: –í—ã–±–æ—Ä —Ç–µ–º—ã -->
        <div class="student-form" id="stepTopicForm" style="display: none;">
            <h2>–®–∞–≥ 3: –í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É</h2>
            <div class="form-group">
                <label for="topicSelect">–¢–µ–º–∞:</label>
                <select id="topicSelect" required class="select" style="font-size: 1.1em; padding: 12px; width: 100%; max-width: 400px;">
                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É...</option>
                </select>
            </div>
            <button onclick="goBack()" class="btn" style="margin-top: 20px;">‚Üê –ù–∞–∑–∞–¥</button>
        </div>

        <!-- –≠—Ç–∞–ø 4: –í—ã–±–æ—Ä —Ç–µ—Å—Ç–∞ –∏ –≤–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö -->
        <div class="student-form" id="stepTestForm" style="display: none;">
            <h2>–®–∞–≥ 4: –í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ—Å—Ç –∏ –≤–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ</h2>

            <div class="form-group">
                <label for="templateSelect">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ—Å—Ç:</label>
                <select id="templateSelect" required class="select">
                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ—Å—Ç...</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="studentName">–§–ò–û:</label>
                <input type="text" id="studentName" required class="input" placeholder="–§–∞–º–∏–ª–∏—è –ò–º—è">
            </div>
            
            <div class="form-group">
                <label for="studentClass">–ö–ª–∞—Å—Å:</label>
                <select id="studentClass" required class="select">
                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–ª–∞—Å—Å...</option>
                </select>
            </div>

            <button onclick="startTest()" class="btn btn-large">–ù–∞—á–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ</button>
            <button onclick="goBack()" class="btn" style="margin-top: 10px;">‚Üê –ù–∞–∑–∞–¥</button>
            
            <div class="mobile-only" style="margin-top: 20px; padding: 10px; background: #f8f9fa; border-radius: 5px; font-size: 0.8rem;">
                <strong>üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞:</strong> –î–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —Ä–∞–±–æ—Ç—ã –ø–æ–≤–µ—Ä–Ω–∏—Ç–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –≤ –∞–ª—å–±–æ–º–Ω—É—é –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—é
            </div>
        </div>

        <div class="test-area" id="testArea" style="display: none;">
            <div class="test-header">
                <div class="student-info">
                    <span id="displayName"></span> | <span id="displayClass"></span>
                </div>
                <div class="progress">
                    –ó–∞–ø–æ–ª–Ω–µ–Ω–æ: <span id="progress">0</span> –∏–∑ <span id="totalFields">0</span>
                </div>
            </div>

            <!-- –ú–æ–±–∏–ª—å–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è -->
            <div class="page-navigation" id="pageNavigation" style="display: none;">
                <button onclick="prevPage()" id="prevBtn" class="btn">‚Üê –ù–∞–∑–∞–¥</button>
                <span id="pageInfo">1 / 1</span>
                <button onclick="nextPage()" id="nextBtn" class="btn">–í–ø–µ—Ä–µ–¥ ‚Üí</button>
            </div>

            <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Å–∫—Ä–æ–ª–ª–∞ -->
            <div style="overflow: auto; max-width: 100%;">
                <div id="documentViewer"></div>
            </div>

            <div class="test-controls">
                <button onclick="checkAnswers()" class="btn btn-large" id="submitBtn">‚úÖ –ó–∞–≤–µ—Ä—à–∏—Ç—å –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
                <button onclick="resetTest()" class="btn">üîÑ –ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>
                
                <div class="mobile-only" style="text-align: center; margin-top: 10px; font-size: 0.8rem; color: #666;">
                    üîç –î–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–≤—É–º—è –ø–∞–ª—å—Ü–∞–º–∏
                </div>
            </div>
        </div>

        <div class="results" id="results" style="display: none;">
            <h2>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã</h2>
            <div class="score">
                <div class="score-circle">
                    <span id="scorePercent">0%</span>
                </div>
                <div class="score-details">
                    <p>–ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤: <span id="correctCount">0</span> –∏–∑ <span id="totalCount">0</span></p>
                    <p id="sheetsStatus"></p>
                </div>
            </div>
            
            <div class="answer-review" id="answerReview">
                <!-- –ó–¥–µ—Å—å –±—É–¥–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–π —Ä–∞–∑–±–æ—Ä –æ—Ç–≤–µ—Ç–æ–≤ -->
            </div>

            <button onclick="resetTest()" class="btn">üîÑ –í—ã–ø–æ–ª–Ω–∏—Ç—å –µ—â–µ —Ä–∞–∑</button>
            <button onclick="goToTestSelection()" class="btn" style="margin-top: 10px;">üìã –í—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥–æ–µ –∑–∞–¥–∞–Ω–∏–µ</button>
        </div>
    </div>

    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <p id="modalText"></p>
            <button onclick="document.getElementById('modal').style.display='none'" class="btn" style="margin-top: 15px;">OK</button>
        </div>
    </div>

    <script src="/static/js/student.js"></script>
</body>
</html>